<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finance Dictionary</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        header h1 {
            font-size: 28px;
            margin-bottom: 0;
            flex: 1;
        }

        .unlock-btn {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
        }

        .unlock-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .logout-btn {
            background: #db2828;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
            margin-left: 10px;
        }

        .logout-btn:hover {
            background: #ca1010;
        }

        header p {
            font-size: 14px;
            opacity: 0.9;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 400px;
            width: 90%;
            text-align: center;
        }

        .modal-content h2 {
            margin-bottom: 20px;
            color: #333;
        }

        .modal-content input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            margin-bottom: 15px;
            font-size: 14px;
        }

        .password-wrapper {
    position: relative;
    margin-bottom: 15px;
}

.toggle-password {
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    cursor: pointer;
    color: #999;
    font-size: 16px;
    padding: 0;
    transition: color 0.3s;
}

.toggle-password:hover {
    color: #2185d0;
}


        .modal-content button {
            padding: 10px 20px;
            background: #2185d0;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin-right: 10px;
            transition: all 0.3s;
        }

        .modal-content button:hover {
            background: #1678c2;
        }

        .modal-content button.cancel {
            background: #ccc;
            color: #333;
        }

        .modal-content button.cancel:hover {
            background: #bbb;
        }

        .nav-tabs {
            display: flex;
            background: #f5f5f5;
            border-bottom: 2px solid #ddd;
        }

        .nav-tab {
            flex: 1;
            padding: 15px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: #666;
            transition: all 0.3s;
            text-align: center;
        }

        .nav-tab.active {
            background: white;
            color: #2185d0;
            border-bottom: 3px solid #2185d0;
        }

        .nav-tab:hover {
            background: #fff;
        }

        .nav-tab.hidden {
            display: none;
        }

        .content {
            padding: 30px;
            display: none;
        }

        .content.active {
            display: block;
        }

        h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        input, textarea, select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-family: inherit;
            font-size: 14px;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #2185d0;
            box-shadow: 0 0 0 3px rgba(33, 133, 208, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .btn-primary {
            background: #2185d0;
            color: white;
        }

        .btn-primary:hover {
            background: #1678c2;
        }

        .btn-secondary {
            background: #f5f5f5;
            color: #333;
            border: 1px solid #ddd;
            margin-left: 10px;
        }

        .btn-secondary:hover {
            background: #e8e8e8;
        }

        .btn-danger {
            background: #db2828;
            color: white;
            padding: 6px 12px;
            font-size: 13px;
        }

        .btn-danger:hover {
            background: #ca1010;
        }

        .btn-edit {
            background: #2185d0;
            color: white;
            padding: 6px 12px;
            font-size: 13px;
            margin-right: 5px;
        }

        .button-group {
            margin: 20px 0;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .admin-header h2 {
            margin: 0;
        }

        .sort-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s;
        }

        .sort-btn:hover {
            background: #5568d3;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }

        .stat-number {
            font-size: 28px;
            font-weight: 700;
            color: #2185d0;
        }

        .stat-label {
            font-size: 12px;
            color: #666;
            text-transform: uppercase;
            margin-top: 5px;
        }

        .search-box {
            position: relative;
            margin-bottom: 20px;
        }

        .search-box input {
            padding-left: 40px;
        }

        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #666;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        .card {
            background: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            transition: all 0.3s;
        }

        .card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }

        .card h3 {
            color: #2185d0;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .card-label {
            font-size: 11px;
            color: #999;
            font-weight: 600;
            text-transform: uppercase;
            margin-top: 12px;
            margin-bottom: 4px;
        }

        .card-content {
            font-size: 13px;
            color: #333;
            line-height: 1.5;
        }

        .empty {
            text-align: center;
            padding: 40px;
            color: #999;
        }

        .empty-icon {
            font-size: 48px;
            margin-bottom: 10px;
        }

        .success-msg {
            background: #d4edda;
            color: #155724;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 20px;
            display: none;
        }

        .edit-indicator {
            background: #e3f2fd;
            border: 1px solid #90caf9;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 20px;
            display: none;
        }

        .mailbox-card {
            background: #f9f9f9;
            border-left: 4px solid #fbad17;
            border: 1px solid #ddd;
            border-left: 4px solid #fbad17;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .mailbox-card h3 {
            color: #2185d0;
            margin: 0 0 5px 0;
            font-size: 16px;
        }

        .mailbox-meta {
            font-size: 12px;
            color: #999;
            margin-bottom: 8px;
        }

        .mailbox-note {
            background: white;
            padding: 10px;
            border-radius: 4px;
            font-size: 13px;
            color: #333;
            margin-top: 8px;
        }

        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }
            .stats {
                grid-template-columns: 1fr;
            }
            header {
                flex-direction: column;
                gap: 10px;
            }
            .admin-header {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div style="flex: 1;">
                <h1>üìö Finance Dictionary</h1>
                <p>Empowering financial literacy, one term at a time</p>
            </div>
            <button class="unlock-btn" onclick="openPasswordModal()" id="unlockBtn">üîê Admin Control</button>
            <button class="logout-btn" onclick="logout()" id="logoutBtn" style="display: none;">Logout</button>
        </header>

        <div class="modal" id="passwordModal">
            <div class="modal-content">
                <h2>üîê Admin Access</h2>
                <div class="password-wrapper">
                    <input type="password" id="passwordInput" placeholder="Enter admin password" onkeypress="handlePasswordKeyPress(event)">
                    <button class="toggle-password" onclick="togglePasswordVisibility()">üëÅÔ∏è</button>
                </div>
                <button onclick="checkPassword()">Unlock</button>
                <button class="cancel" onclick="closePasswordModal()">Cancel</button>
            </div>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="switchTab('browse')">Browse</button>
            <button class="nav-tab hidden" id="adminTab" onclick="switchTab('admin')">Admin Panel</button>
            <button class="nav-tab" onclick="switchTab('mailbox')">Mailbox</button>
        </div>

        <!-- BROWSE TAB -->
        <div id="browse" class="content active">
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-number" id="totalTerms">0</div>
                    <div class="stat-label">Total Terms</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalRequests">0</div>
                    <div class="stat-label">Requests</div>
                </div>
            </div>

            <div class="search-box">
                <span class="search-icon">üîç</span>
                <input type="text" id="searchInput" placeholder="Search terms, definitions...">
            </div>

            <div id="browseGrid" class="grid"></div>
        </div>

        <!-- ADMIN TAB -->
        <div id="admin" class="content">
            <div class="admin-header">
                <h2>Manage Finance Terms</h2>
                <button class="sort-btn" onclick="sortTermsAlphabetically()">üìä Sort A-Z</button>
            </div>

            <div id="editIndicator" class="edit-indicator">
                <strong>‚úèÔ∏è Editing:</strong> <span id="editName"></span>
            </div>

            <div class="form-group">
                <label>Term Name *</label>
                <input type="text" id="termName" placeholder="e.g., Bull Market">
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div class="form-group">
                    <label>Simple Explanation *</label>
                    <textarea id="termSimple" placeholder="Easy explanation..."></textarea>
                </div>
                <div class="form-group">
                    <label>Official Definition *</label>
                    <textarea id="termOfficial" placeholder="Technical definition..."></textarea>
                </div>
            </div>

            <div class="form-group">
                <label>Fun Analogy (Optional)</label>
                <textarea id="termAnalogy" placeholder="Real-world analogy..."></textarea>
            </div>

            <div class="form-group">
                <label>Category</label>
                <select id="termCategory">
                    <option>General</option>
                    <option>Markets</option>
                    <option>Investing</option>
                    <option>Trading</option>
                    <option>Risk Management</option>
                    <option>ESG</option>
                </select>
            </div>

            <div class="button-group">
                <button class="btn btn-primary" onclick="saveTerm()">Add/Update Term</button>
                <button class="btn btn-secondary" onclick="clearForm()">Clear</button>
                <button class="btn btn-secondary" id="cancelBtn" style="display: none;" onclick="cancelEdit()">Cancel Edit</button>
            </div>

            <h2 style="margin-top: 30px;">Your Terms</h2>
            <div id="adminGrid" class="grid"></div>
        </div>

        <!-- MAILBOX TAB -->
        <div id="mailbox" class="content">
            <h2>Friend Requests for New Terms</h2>
            <p style="color: #666; margin-bottom: 20px;">Friends can request new terms here. You review and add definitions.</p>

            <div class="form-group">
                <label>Term You Want *</label>
                <input type="text" id="mbTerm" placeholder="e.g., Hedge Fund">
            </div>

            <div class="form-group">
                <label>Why? (Optional)</label>
                <textarea id="mbWhy" placeholder="Why is this term important..."></textarea>
            </div>

            <button class="btn btn-primary" onclick="submitRequest()">Submit Request</button>

            <div id="successMsg" class="success-msg">‚úì Request submitted!</div>

            <h2 style="margin-top: 30px;">Recent Requests</h2>
            <div id="mailboxList"></div>
        </div>
    </div>

    <script>
        const ADMIN_PASSWORD = "finance123";
        
        let dictionary = JSON.parse(localStorage.getItem('dict')) || [];
        let mailbox = JSON.parse(localStorage.getItem('mail')) || [];
        let editId = null;
        let isAdminUnlocked = localStorage.getItem('adminUnlocked') === 'true';

        // Initialize admin panel visibility on page load
        function initializeAdminPanel() {
            if (isAdminUnlocked) {
                showAdminPanel();
            }
        }

        function openPasswordModal() {
            document.getElementById('passwordModal').classList.add('active');
            document.getElementById('passwordInput').focus();
        }

        function closePasswordModal() {
            document.getElementById('passwordModal').classList.remove('active');
            document.getElementById('passwordInput').value = '';
            document.getElementById('passwordInput').type = 'password';
        }

        function handlePasswordKeyPress(event) {
            if (event.key === 'Enter') {
                checkPassword();
            }
        }

        function togglePasswordVisibility() {
            const passwordInput = document.getElementById('passwordInput');
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
            } else {
                passwordInput.type = 'password';
            }
        }

        function checkPassword() {
            const password = document.getElementById('passwordInput').value;
            if (password === ADMIN_PASSWORD) {
                isAdminUnlocked = true;
                localStorage.setItem('adminUnlocked', 'true');
                closePasswordModal();
                showAdminPanel();
            } else {
                alert('Wrong password!');
                document.getElementById('passwordInput').value = '';
            }
        }

        function showAdminPanel() {
            document.getElementById('adminTab').classList.remove('hidden');
            document.getElementById('unlockBtn').style.display = 'none';
            document.getElementById('logoutBtn').style.display = 'inline-block';
        }

        function logout() {
            isAdminUnlocked = false;
            localStorage.setItem('adminUnlocked', 'false');
            document.getElementById('adminTab').classList.add('hidden');
            document.getElementById('unlockBtn').style.display = 'inline-block';
            document.getElementById('logoutBtn').style.display = 'none';
            switchTab('browse');
        }

        function sortTermsAlphabetically() {
            dictionary.sort((a, b) => a.word.localeCompare(b.word));
            saveDictionary();
            renderAdmin();
            alert('‚úì Terms sorted alphabetically!');
        }

        // Initialize with sample data
        if (dictionary.length === 0) {
            dictionary = [
                {
                    id: 1,
                    word: 'Bull Market',
                    simple: 'A period when stock prices are rising and investors are optimistic.',
                    official: 'A market condition with rising prices and positive sentiment.',
                    analogy: 'Like a bull thrusting horns upward ‚Äì prices go up!',
                    category: 'Markets'
                },
                {
                    id: 2,
                    word: 'Bear Market',
                    simple: 'A period when stock prices are falling.',
                    official: 'Asset prices decline 20%+ with widespread pessimism.',
                    analogy: 'A bear swipes paws downward ‚Äì prices go down!',
                    category: 'Markets'
                },
                {
                    id: 3,
                    word: 'Dividend',
                    simple: 'Money a company pays shareholders from profits.',
                    official: 'Distribution of earnings to shareholders in cash or stock.',
                    analogy: 'Like sharing pizza slices ‚Äì company shares profits with owners!',
                    category: 'Investing'
                }
            ];
            saveDictionary();
        }

        function switchTab(tab) {
            document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.nav-tab:not(.hidden)').forEach(t => t.classList.remove('active'));
            document.getElementById(tab).classList.add('active');
            event.target.classList.add('active');
            if (tab === 'browse') renderBrowse();
            if (tab === 'admin') renderAdmin();
            if (tab === 'mailbox') renderMailbox();
        }

        function saveTerm() {
            const name = document.getElementById('termName').value.trim();
            const simple = document.getElementById('termSimple').value.trim();
            const official = document.getElementById('termOfficial').value.trim();
            const analogy = document.getElementById('termAnalogy').value.trim();
            const category = document.getElementById('termCategory').value;

            if (!name || !simple || !official) {
                alert('Fill required fields!');
                return;
            }

            if (editId) {
                const idx = dictionary.findIndex(d => d.id === editId);
                dictionary[idx] = { ...dictionary[idx], word: name, simple, official, analogy, category };
            } else {
                dictionary.push({ id: Date.now(), word: name, simple, official, analogy, category });
            }

            saveDictionary();
            clearForm();
            cancelEdit();
            renderBrowse();
            renderAdmin();
        }

        function editTerm(id) {
            const term = dictionary.find(d => d.id === id);
            editId = id;
            document.getElementById('termName').value = term.word;
            document.getElementById('termSimple').value = term.simple;
            document.getElementById('termOfficial').value = term.official;
            document.getElementById('termAnalogy').value = term.analogy;
            document.getElementById('termCategory').value = term.category;
            document.getElementById('editIndicator').style.display = 'block';
            document.getElementById('editName').innerText = term.word;
            document.getElementById('cancelBtn').style.display = 'inline-block';
            window.scrollTo(0, 0);
        }

        function cancelEdit() {
            editId = null;
            document.getElementById('editIndicator').style.display = 'none';
            document.getElementById('cancelBtn').style.display = 'none';
        }

        function deleteTerm(id) {
            if (confirm('Delete this term?')) {
                dictionary = dictionary.filter(d => d.id !== id);
                saveDictionary();
                renderBrowse();
                renderAdmin();
            }
        }

        function clearForm() {
            document.getElementById('termName').value = '';
            document.getElementById('termSimple').value = '';
            document.getElementById('termOfficial').value = '';
            document.getElementById('termAnalogy').value = '';
            document.getElementById('termCategory').value = 'General';
        }

        function renderBrowse() {
            const search = document.getElementById('searchInput').value.toLowerCase();
            const filtered = dictionary.filter(d => 
                (d.word + d.simple + d.official + d.analogy).toLowerCase().includes(search)
            );

            const grid = document.getElementById('browseGrid');
            if (filtered.length === 0) {
                grid.innerHTML = '<div class="empty" style="grid-column: 1/-1;"><div class="empty-icon">üìñ</div><p>No terms found</p></div>';
                return;
            }

            grid.innerHTML = filtered.map(d => `
                <div class="card">
                    <h3>${d.word}</h3>
                    <div class="card-label">üìù Simple</div>
                    <div class="card-content">${d.simple}</div>
                    <div class="card-label">üìö Definition</div>
                    <div class="card-content">${d.official}</div>
                    ${d.analogy ? `<div class="card-label">üí° Analogy</div><div class="card-content">${d.analogy}</div>` : ''}
                    <div class="card-label">üìÇ Category</div>
                    <div class="card-content">${d.category}</div>
                </div>
            `).join('');

            document.getElementById('totalTerms').innerText = dictionary.length;
            document.getElementById('totalRequests').innerText = mailbox.length;
        }

        function renderAdmin() {
            const grid = document.getElementById('adminGrid');
            if (dictionary.length === 0) {
                grid.innerHTML = '<div class="empty"><div class="empty-icon">üìù</div><p>No terms yet</p></div>';
                return;
            }

            grid.innerHTML = dictionary.map(d => `
                <div class="card">
                    <div style="display: flex; justify-content: space-between; align-items: start;">
                        <h3>${d.word}</h3>
                        <div>
                            <button class="btn btn-edit" onclick="editTerm(${d.id})">Edit</button>
                            <button class="btn btn-danger" onclick="deleteTerm(${d.id})">Delete</button>
                        </div>
                    </div>
                    <div class="card-content">${d.simple.substring(0, 80)}...</div>
                </div>
            `).join('');
        }

        function submitRequest() {
            const term = document.getElementById('mbTerm').value.trim();
            const why = document.getElementById('mbWhy').value.trim();

            if (!term) {
                alert('Please enter a term!');
                return;
            }

            mailbox.push({ id: Date.now(), term, why, date: new Date().toLocaleDateString() });
            saveMailbox();

            document.getElementById('mbTerm').value = '';
            document.getElementById('mbWhy').value = '';

            const msg = document.getElementById('successMsg');
            msg.style.display = 'block';
            setTimeout(() => msg.style.display = 'none', 3000);

            renderMailbox();
            document.getElementById('totalRequests').innerText = mailbox.length;
        }

        function renderMailbox() {
            const list = document.getElementById('mailboxList');
            if (mailbox.length === 0) {
                list.innerHTML = '<div class="empty"><p>No requests yet</p></div>';
                return;
            }

            list.innerHTML = mailbox.map(m => `
                <div class="mailbox-card">
                    <div style="display: flex; justify-content: space-between;">
                        <h3>${m.term}</h3>
                        <button class="btn btn-danger" onclick="deleteRequest(${m.id})">‚úï</button>
                    </div>
                    <div class="mailbox-meta">üìÖ ${m.date}</div>
                    ${m.why ? `<div class="mailbox-note"><strong>Why:</strong> ${m.why}</div>` : ''}
                </div>
            `).join('');
        }

        function deleteRequest(id) {
            if (confirm('Delete?')) {
                mailbox = mailbox.filter(m => m.id !== id);
                saveMailbox();
                renderMailbox();
            }
        }

        function saveDictionary() {
            localStorage.setItem('dict', JSON.stringify(dictionary));
        }

        function saveMailbox() {
            localStorage.setItem('mail', JSON.stringify(mailbox));
        }

        // Initialize
        document.getElementById('searchInput').addEventListener('input', renderBrowse);
        initializeAdminPanel();
        renderBrowse();
        renderMailbox();
    </script>
</body>
</html>
